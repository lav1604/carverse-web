<!doctype html>
<html lang="en" ng-app="Dashboard">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:," />
    <title>Asset Tracker Web Application</title>

    <link rel="stylesheet" type="text/css" href="CSS/bootstrap.min.css" />
    <script type="text/javascript" src="JS/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="JS/bootstrap.bundle.min.js"></script>

    <script type="text/javascript" src="JS/app.js"></script>
  </head>

  <body>
    <div class="container">

      <!-- Header -->
      <div class="row align-items-start mt-3">
        <div class="col-2"></div>
        <div class="col-8 text-center">
          <h3>Asset Tracker Web Application</h3>
          <p class="text-muted" style="margin-bottom: 0;">
            CarVerse demo: CRUD + private blob storage (SAS links)
          </p>
        </div>
        <div class="col-2"></div>
      </div>

      <!-- New / Update Asset Box -->
      <div class="row align-items-start mt-3">
        <div class="col-2"></div>

        <div class="col-8" style="text-align: left; border-bottom: 1px solid #222222;">
          <p class="mt-2"><strong>Add / Update Asset</strong></p>

          <form style="font-size: 10pt;" id="newAssetForm">
            <div class="mb-3">
              <label for="AssetLabel" class="form-label">Asset Label</label>
              <input type="text" class="form-control" id="AssetLabel" placeholder="e.g., BMW M6 Gran Coupe" />
            </div>

            <div class="mb-3">
              <label for="Cost" class="form-label">Cost</label>
              <input type="number" class="form-control" id="Cost" placeholder="e.g., 45000" />
            </div>

            <div class="mb-3">
              <label for="AssetType" class="form-label">Asset Type</label>
              <input type="text" class="form-control" id="AssetType" placeholder="e.g., Car" />
            </div>

            <div class="mb-3">
              <label for="NameOfOwner" class="form-label">Name of Owner</label>
              <input type="text" class="form-control" id="NameOfOwner" placeholder="e.g., John" />
            </div>

            <div class="mb-3">
              <label for="AddressLine1" class="form-label">Address Line 1</label>
              <input type="text" class="form-control" id="AddressLine1" placeholder="e.g., Belfast" />
            </div>

            <div class="mb-3">
              <label for="AddressLine2" class="form-label">Address Line 2</label>
              <input type="text" class="form-control" id="AddressLine2" placeholder="e.g., NI" />
            </div>

            <div class="mb-3">
              <label for="Note" class="form-label">Note</label>
              <input type="text" class="form-control" id="Note" placeholder="e.g., Now with image" />
            </div>

            <div class="mb-3">
              <label for="MediaFile" class="form-label">Car photo</label>
              <input type="file" class="form-control" id="MediaFile" accept="image/*" />
              <small class="form-text text-muted">
                Optional. Selecting a file will upload it to Blob Storage and store MediaBlobName in SQL.
              </small>
            </div>

            <div class="d-flex gap-2 mb-3">
              <button type="button" id="subNewForm" class="btn btn-primary">Submit (Create)</button>
              <button type="button" class="btn btn-outline-secondary" onclick="document.getElementById('newAssetForm').reset();">
                Clear form
              </button>
            </div>

            <div class="alert alert-info py-2" style="font-size: 9.5pt;">
              <strong>Tip:</strong> To update an item, type new values in the form, then click <em>Update</em> beside an Asset in the list.
              If you choose a new photo, it will upload and replace the MediaBlobName for that Asset.
            </div>
          </form>
        </div>

        <div class="col-2"></div>
      </div>

      <!-- View Assets Area -->
      <div class="row align-items-start mt-3">
        <div class="col-2"></div>

        <div class="col-8" style="text-align: left;">
          <!-- Controls row -->
          <div class="d-flex flex-wrap align-items-center justify-content-between gap-2" style="padding: 5px;">
            <div class="d-flex flex-wrap gap-2 align-items-center">
              <button id="retAssets" type="button" class="btn btn-primary">View Assets</button>

              <input
                id="searchBox"
                type="text"
                class="form-control"
                style="max-width: 220px;"
                placeholder="Search (e.g., BMW)"
              />

              <select id="pageSize" class="form-select" style="max-width: 120px;">
                <option value="5">Page size: 5</option>
                <option value="10" selected>Page size: 10</option>
                <option value="20">Page size: 20</option>
              </select>
            </div>

            <div class="d-flex gap-2 align-items-center">
              <button id="prevPage" type="button" class="btn btn-outline-secondary btn-sm">Prev</button>
              <button id="nextPage" type="button" class="btn btn-outline-secondary btn-sm">Next</button>
              <span id="pageInfo" class="text-muted" style="font-size: 10pt;"></span>
            </div>
          </div>

          <div id="AssetList">
            <h4>Please click the View Assets button if you wish to view assets on the system.</h4>
          </div>
        </div>

        <div class="col-2"></div>
      </div>

      <div class="row mt-3">
        <div class="col-2"></div>
        <div class="col-8 text-muted" style="font-size: 9pt;">
          If images don’t show, it usually means the item has no MediaBlobName yet, or the READ-SAS Logic App isn’t returning a SAS URL.
        </div>
        <div class="col-2"></div>
      </div>

    </div>
  </body>
</html>
