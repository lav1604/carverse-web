<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="data:," />

    <title>CarVerse | Asset Tracker</title>

    <link rel="stylesheet" type="text/css" href="CSS/bootstrap.min.css" />
    <script type="text/javascript" src="JS/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="JS/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="JS/app.js"></script>

    <style>
      body { transition: background-color .15s ease, color .15s ease; }
      .brand-pill { font-size: 12px; padding: 2px 10px; border-radius: 999px; }
      .asset-card { border-radius: 12px; }
      .asset-img { max-width: 260px; border-radius: 12px; display:block; }
      .muted-sm { font-size: 12px; opacity: .8; }
      .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12px; }
      .btn-xs { padding: .25rem .5rem; font-size: .825rem; }
      .sticky-top-lite { position: sticky; top: 0; z-index: 10; backdrop-filter: blur(6px); }
    </style>
  </head>

  <body>
    <div class="container pb-5">

      <!-- Header -->
      <div class="row mt-3 sticky-top-lite">
        <div class="col-12">
          <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 p-2 rounded" id="topBar">
            <div>
              <div class="d-flex align-items-center gap-2">
                <h3 class="mb-0">CarVerse</h3>
                <span class="bg-primary text-white brand-pill">Asset Tracker</span>
              </div>
              <div class="text-muted muted-sm">
                CRUD + Azure SQL + Private Blob Storage (SAS) + Paging/Search
              </div>
            </div>

            <div class="d-flex align-items-center gap-2">
              <button id="themeToggle" class="btn btn-outline-secondary btn-sm">
                Toggle theme
              </button>
              <button id="retAssets" type="button" class="btn btn-primary btn-sm">
                Refresh list
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Status -->
      <div class="row mt-2">
        <div class="col-12">
          <div id="statusBar" class="alert alert-info py-2 mb-2" style="display:none;"></div>
        </div>
      </div>

      <!-- Form -->
      <div class="row mt-2">
        <div class="col-12">
          <div class="card shadow-sm asset-card">
            <div class="card-body">
              <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                <div>
                  <h5 class="mb-0">Create / Update Asset</h5>
                  <div class="text-muted muted-sm">
                    Tip: click <b>Select</b> on an asset to load it into the form, then hit <b>Update Selected</b>.
                  </div>
                </div>
                <div class="text-muted muted-sm">
                  Selected ID: <span id="selectedId" class="mono">none</span>
                </div>
              </div>

              <hr />

              <form id="newAssetForm" style="font-size: 10pt;">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="AssetLabel" class="form-label">Asset Label</label>
                    <input type="text" class="form-control" id="AssetLabel" placeholder="e.g., BMW M6 Gran Coupe" />
                  </div>

                  <div class="col-md-3">
                    <label for="Cost" class="form-label">Cost</label>
                    <input type="number" class="form-control" id="Cost" placeholder="e.g., 45000" />
                  </div>

                  <div class="col-md-3">
                    <label for="AssetType" class="form-label">Asset Type</label>
                    <input type="text" class="form-control" id="AssetType" placeholder="e.g., Car" />
                  </div>

                  <div class="col-md-4">
                    <label for="NameOfOwner" class="form-label">Owner</label>
                    <input type="text" class="form-control" id="NameOfOwner" placeholder="e.g., John" />
                  </div>

                  <div class="col-md-4">
                    <label for="AddressLine1" class="form-label">Address Line 1</label>
                    <input type="text" class="form-control" id="AddressLine1" placeholder="e.g., Belfast" />
                  </div>

                  <div class="col-md-4">
                    <label for="AddressLine2" class="form-label">Address Line 2</label>
                    <input type="text" class="form-control" id="AddressLine2" placeholder="e.g., NI" />
                  </div>

                  <div class="col-md-8">
                    <label for="Note" class="form-label">Note</label>
                    <input type="text" class="form-control" id="Note" placeholder="e.g., Now with image" />
                  </div>

                  <div class="col-md-4">
                    <label for="MediaFile" class="form-label">Car photo</label>
                    <input type="file" class="form-control" id="MediaFile" accept="image/*" />
                    <div class="text-muted muted-sm mt-1">Optional (max 8MB). Uploads to Blob Storage and stores MediaBlobName.</div>
                  </div>
                </div>

                <div class="d-flex flex-wrap gap-2 mt-3">
                  <button type="button" id="subNewForm" class="btn btn-primary">Submit (Create)</button>
                  <button type="button" id="updateSelectedBtn" class="btn btn-warning">Update Selected</button>
                  <button type="button" id="clearFormBtn" class="btn btn-outline-secondary">Clear form</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div class="row mt-3">
        <div class="col-12">
          <div class="card shadow-sm asset-card">
            <div class="card-body">
              <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">
                <div class="d-flex flex-wrap gap-2 align-items-center">
                  <input id="searchBox" type="text" class="form-control" style="max-width: 240px;" placeholder="Search (e.g., BMW)" />
                  <button id="searchBtn" type="button" class="btn btn-secondary">Search</button>

                  <select id="pageSize" class="form-select" style="max-width: 160px;">
                    <option value="5">Page size: 5</option>
                    <option value="10" selected>Page size: 10</option>
                    <option value="20">Page size: 20</option>
                    <option value="50">Page size: 50</option>
                  </select>
                </div>

                <div class="d-flex gap-2 align-items-center">
                  <button id="prevPage" type="button" class="btn btn-outline-secondary btn-sm">Prev</button>
                  <button id="nextPage" type="button" class="btn btn-outline-secondary btn-sm">Next</button>
                  <span id="pageInfo" class="text-muted" style="font-size: 10pt;"></span>
                </div>
              </div>

              <div class="text-muted muted-sm mt-2">
                Images are private: the UI requests a short-lived READ-SAS URL per image.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- List -->
      <div class="row mt-3">
        <div class="col-12">
          <div id="AssetList">
            <div class="alert alert-light">Click <b>Refresh list</b> to load assets.</div>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>
